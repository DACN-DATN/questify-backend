# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: course-mgmt-depl
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: course-mgmt
#   template:
#     metadata:
#       labels:
#         app: course-mgmt
#     spec:
#       containers:
#         - name: course-mgmt
#           image: questify/course-mgmt
#           env:
#             - name: NODE_ENV
#               valueFrom:
#                 configMapKeyRef:
#                   name: app-config
#                   key: NODE_ENV
#             - name: POSTGRES_DB
#               valueFrom:
#                 configMapKeyRef:
#                   name: course-mgmt-postgres-secret
#                   key: POSTGRES_DB
#             - name: POSTGRES_USER
#               valueFrom:
#                 configMapKeyRef:
#                   name: course-mgmt-postgres-secret
#                   key: POSTGRES_USER
#             - name: POSTGRES_PASSWORD
#               valueFrom:
#                 configMapKeyRef:
#                   name: course-mgmt-postgres-secret
#                   key: POSTGRES_PASSWORD
#             - name: POSTGRES_URI
#               value: 'postgresql://$(POSTGRES_USER):$(POSTGRES_PASSWORD)@course-mgmt-postgres-srv:5432/$(POSTGRES_DB)'
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: course-mgmt-srv
# spec:
#   selector:
#     app: course-mgmt
#   ports:
#     - name: course-mgmt
#       protocol: TCP
#       port: 3000
#       targetPort: 3000
# ---
# apiVersion: v1
# kind: ConfigMap
# metadata:
#   name: course-mgmt-postgres-secret
#   labels:
#     app: course-mgmt-postgres
# data:
#   POSTGRES_DB: ps_db
#   POSTGRES_USER: ps_user
#   POSTGRES_PASSWORD: SecurePassword
# ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: course-mgmt-postgres
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: course-mgmt-postgres
#   template:
#     metadata:
#       labels:
#         app: course-mgmt-postgres
#     spec:
#       containers:
#         - name: course-mgmt-postgres
#           image: 'postgres:17'
#           ports:
#             - containerPort: 5432
#           envFrom:
#             - configMapRef:
#                 name: course-mgmt-postgres-secret
#           volumeMounts:
#             - mountPath: /var/lib/course-mgmt-postgresql/data
#               name: course-mgmt-postgresdata
#       volumes:
#         - name: course-mgmt-postgresdata
#           persistentVolumeClaim:
#             claimName: course-mgmt-postgres-volume-claim
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: course-mgmt-postgres-srv
# spec:
#   selector:
#     app: course-mgmt-postgres
#   ports:
#     - name: db
#       protocol: TCP
#       port: 5432
#       targetPort: 5432
# ---
# apiVersion: v1
# kind: PersistentVolumeClaim
# metadata:
#   name: course-mgmt-postgres-volume-claim
#   labels:
#     app: course-mgmt-postgres
# spec:
#   storageClassName: manual
#   accessModes:
#     - ReadWriteMany
#   resources:
#     requests:
#       storage: 10Gi
# ---
# apiVersion: v1
# kind: PersistentVolume
# metadata:
#   name: course-mgmt-postgres-volume
#   labels:
#     type: local
#     app: course-mgmt-postgres
# spec:
#   storageClassName: manual
#   capacity:
#     storage: 10Gi
#   accessModes:
#     - ReadWriteMany
#   hostPath:
#     path: /data/course-mgmt-postgresql
